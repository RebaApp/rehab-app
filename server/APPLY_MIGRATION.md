# üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–Ω–¥–µ–∫—Å–æ–≤

## ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ schema.prisma

–î–æ–±–∞–≤–ª–µ–Ω–æ **6 –∏–Ω–¥–µ–∫—Å–æ–≤** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

## üìã –°–ø–æ—Å–æ–±—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ Prisma Migrate (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd server

# –°–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
npx prisma migrate dev --name add_database_indexes
```

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏
2. –ü—Ä–∏–º–µ–Ω–∏—Ç SQL –∫ –ë–î
3. –û–±–Ω–æ–≤–∏—Ç Prisma Client

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Prisma DB Push (–±—ã—Å—Ç—Ä–æ, –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

```bash
cd server

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏)
npx prisma db push
```

### –°–ø–æ—Å–æ–± 3: –í—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ SQL (–µ—Å–ª–∏ Prisma –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

```bash
cd server

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL
psql -U reba_user -d reba_db

# –ò–ª–∏ —á–µ—Ä–µ–∑ Docker
docker exec -i reba_postgres psql -U reba_user -d reba_db < prisma/migrations/add_indexes.sql
```

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å SQL –Ω–∞–ø—Ä—è–º—É—é:
```sql
-- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ prisma/migrations/add_indexes.sql
-- –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ psql –∏–ª–∏ —á–µ—Ä–µ–∑ pgAdmin
```

### –°–ø–æ—Å–æ–± 4: –ß–µ—Ä–µ–∑ Docker Compose

```bash
cd server

# –ï—Å–ª–∏ –ë–î –≤ Docker
docker-compose exec postgres psql -U reba_user -d reba_db -f /path/to/add_indexes.sql
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã —á–µ—Ä–µ–∑ psql:

```sql
-- –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î
\c reba_db

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è centers
\d centers

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è reviews
\d reviews

-- –ò–ª–∏ —á–µ—Ä–µ–∑ SQL –∑–∞–ø—Ä–æ—Å
SELECT 
    tablename, 
    indexname, 
    indexdef 
FROM pg_indexes 
WHERE tablename IN ('centers', 'reviews')
ORDER BY tablename, indexname;
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ Prisma Studio:

```bash
cd server
npx prisma studio
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–∞**
   - –ò–Ω–¥–µ–∫—Å—ã –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ
   - –ú–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç–∞—é—â–µ–π –ë–î
   - –ù–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

2. **–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è**
   - –ü—Ä–∏ 100 —Ü–µ–Ω—Ç—Ä–∞—Ö: 2-5 —Å–µ–∫—É–Ω–¥
   - –ü—Ä–∏ 1,000 —Ü–µ–Ω—Ç—Ä–∞—Ö: 5-10 —Å–µ–∫—É–Ω–¥
   - –ü—Ä–∏ 10,000 —Ü–µ–Ω—Ç—Ä–∞—Ö: 30-60 —Å–µ–∫—É–Ω–¥

3. **–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞**
   - Prisma –ø—Ä–æ–≤–µ—Ä–∏—Ç –∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `CREATE INDEX IF NOT EXISTS`

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ –∑–∞–ø—Ä–æ—Å—ã —Å—Ç–∞–Ω—É—Ç:
- **–ü–æ–∏—Å–∫ –ø–æ –≥–æ—Ä–æ–¥—É:** –≤ 200-500 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
- **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É:** –≤ 60-160 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
- **–ü–æ–∏—Å–∫ –æ—Ç–∑—ã–≤–æ–≤:** –≤ 250-750 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –û—Ç–∫–∞—Ç–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

```sql
DROP INDEX IF EXISTS "centers_city_idx";
DROP INDEX IF EXISTS "centers_rating_idx";
DROP INDEX IF EXISTS "centers_verified_idx";
DROP INDEX IF EXISTS "centers_ownerId_idx";
DROP INDEX IF EXISTS "reviews_centerId_idx";
DROP INDEX IF EXISTS "reviews_userId_idx";
```

–ù–æ —ç—Ç–æ –æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ - –∏–Ω–¥–µ–∫—Å—ã —Ç–æ–ª—å–∫–æ —É—Å–∫–æ—Ä—è—é—Ç –∑–∞–ø—Ä–æ—Å—ã!

---

**–ì–æ—Ç–æ–≤–æ!** –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –ª—é–±—ã–º —É–¥–æ–±–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º! üöÄ


