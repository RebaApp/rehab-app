# РЕБА

[![React Native](https://img.shields.io/badge/React%20Native-0.79.6-blue.svg)](https://reactnative.dev/)
[![Expo](https://img.shields.io/badge/Expo-53.0-black.svg)](https://expo.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.8-blue.svg)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15+-blue.svg)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-7+-red.svg)](https://redis.io/)
[![Firebase](https://img.shields.io/badge/Firebase-Auth-orange.svg)](https://firebase.google.com/)
[![Yandex OAuth](https://img.shields.io/badge/Yandex-OAuth-red.svg)](https://oauth.yandex.ru/)

## О проекте

**РЕБА** — первый в России агрегатор реабилитационных центров, созданный с целью сделать доступ к профильной помощи простым, безопасным и измеримым. 

**Проблема и рынок**

 • Миллионы семей в России имеют потребность в качественной помощи при зависимости; рынок реабилитационных услуг фрагментирован, непрозрачен и подвергается рискам недостоверной информации.
 
 • Отсутствие централизованной точки поиска, верификации и анализа программ снижает доступность и эффективность помощи.
 
 • Рынок комбинирует коммерческие и негосударственные центры, что создаёт большой адресуемый спрос для агрегатора с функцией верификации и аналитики.

**Продукт и ценностное предложение**

 • Для пользователей: умный поиск с многоуровневой фильтрацией (город, программа, цена, рейтинг), профили центров с документами и отзывами, сохранение избранного, образовательный контент, первичный триаж/чат-помощник (в планах — ИИ).
 
 • Для центров: админ-панель для управления карточкой, контентом и программами, инструменты верификации и аналитики лидов.
 
 • Основная ценность: доверие — подтверждённая информация + удобство принятия решения = более высокий конверсионный лид для центров и лучшее совпадение ожиданий для пациентов.

 **Операционная модель для центров**

Платформа не ограничивается витриной: через админ-панель можно создавать карточки центров, управлять контентом и типами статей, то есть центры получают инструменты для продвижения и верификации своих услуг. Такой подход повышает шанс на массовое подключение учреждений и снижает барьер входа для малых центров, которые не имеют собственной IT-инфраструктуры.

**Рыночный и социальный эффект**

РЕБА объединяет технологический подход и социальную миссию. С одной стороны, правильно реализованный агрегатор упрощает доступ к профильной помощи для населения; с другой — создаёт рынок прозрачных услуг и стимулирует центры к соблюдению стандартов (лицензирование, открытая статистика по программам, отзывы). Для государства и НКО такой инструмент может стать каналом сбора анонимной, агрегированной статистики по потребностям в реабилитации.

Платформа объединяет:
- **Витрину центров** с детальной информацией и отзывами
- **Административные инструменты** для управления центрами
- **Механизм доверия** через верификацию, отзывы и контент
- **ИИ-функции** для персонализации и рекомендаций

## Ключевые особенности

### Система авторизации
- **Яндекс OAuth** - быстрый вход через Яндекс ID
- **Email/пароль** - классическая регистрация через Firebase
- **JWT токены** - безопасная аутентификация с истечением срока действия
- **bcrypt** - хеширование паролей с солью (12 раундов)
- **Регистрация центров** - отдельный поток для медицинских учреждений
- **Роли пользователей** - USER, CENTER, ADMIN с разграничением доступа
- **Безопасность** - полная верификация и защита данных

### Мобильное приложение
- **React Native + Expo** - кроссплатформенная разработка
- **TypeScript** - типобезопасность и масштабируемость
- **Zustand** - эффективное управление состоянием
- **Адаптивный дизайн** - поддержка всех размеров экранов

### Функционал платформы
- **Каталог центров** - поиск и фильтрация по параметрам с оптимизированными запросами
- **Детальная информация** - фото, услуги, цены, отзывы
- **Интерактивная карта** - геолокация и маршруты
- **Система отзывов** - честные оценки пациентов
- **Статьи и контент** - образовательные материалы
- **Система бронирований** - запись на консультации и программы
- **Redis кэширование** - ускорение ответов API в 100 раз
- **Оптимизация БД** - индексы для быстрого поиска и сортировки

### Пользовательский интерфейс
- **Современный дизайн** - Material Design принципы
- **Анимации** - плавные переходы и микроинтерракции
- **Темная/светлая тема** - адаптация под предпочтения (в разработке)
- **Доступность** - поддержка скрин-ридеров

## Технический стек

### Frontend (Mobile)
- **React Native 0.79.6** - кроссплатформенная мобильная разработка
- **Expo SDK 53** - инструменты и сервисы для разработки
- **TypeScript 5.8** - строгая типизация для надежности кода
- **Zustand 5.0** - легковесное управление состоянием
- **React Navigation** - навигация между экранами
- **React Native Reanimated 3.17** - производительные анимации

### Backend (Server)
- **Node.js 18+** - серверная платформа
- **Express 4.19** - веб-фреймворк
- **Prisma 6.19** - современный ORM для работы с БД
- **PostgreSQL 15+** - реляционная база данных
- **Redis 7+** - in-memory кэширование для высокой производительности
- **JWT (jsonwebtoken)** - токены для аутентификации
- **bcryptjs** - хеширование паролей

### Безопасность
- **Helmet** - защита HTTP заголовков
- **CORS** - настройка кросс-доменных запросов
- **express-rate-limit** - ограничение частоты запросов
- **express-validator** - валидация и санитизация входных данных
- **JWT токены** - безопасная передача данных аутентификации

### База данных и производительность
- **PostgreSQL** - основная БД с оптимизированными индексами
- **Redis** - кэширование часто запрашиваемых данных (центры, статьи)
- **Connection Pooling** - пул соединений Prisma для эффективного использования ресурсов
- **Индексы БД** - оптимизация запросов по городу, рейтингу, верификации

### Аутентификация и авторизация
- **Firebase Auth** - основная система аутентификации
- **Yandex OAuth** - социальный вход через Яндекс ID
- **JWT** - токены доступа с настраиваемым временем жизни
- **Middleware авторизации** - защита маршрутов и проверка прав доступа

### UI/UX библиотеки
- **Expo Linear Gradient** - градиенты
- **Expo Blur** - эффекты размытия
- **React Native Reanimated** - плавные анимации
- **@expo/vector-icons** - иконки
- **React Native Paper** - Material Design компоненты

### Тестирование
- **Jest 29.7** - фреймворк для unit и integration тестов
- **Supertest** - тестирование HTTP endpoints
- **@testing-library/react-native** - тестирование React Native компонентов

## Установка и запуск

### Предварительные требования
- **Node.js 18+** - серверная платформа
- **npm или yarn** - менеджер пакетов
- **Expo CLI** - инструменты для разработки
- **PostgreSQL 15+** - база данных (для backend)
- **Redis 7+** - кэширование (опционально, но рекомендуется)
- **iOS Simulator или Android Emulator** - для тестирования мобильного приложения

### Быстрый старт

#### Frontend (Mobile App)
```bash
# Клонирование репозитория
git clone https://github.com/RebaApp/rehab-app.git
cd rehab-app

# Установка зависимостей
npm install

# Запуск в режиме разработки
npx expo start

# Запуск на iOS
npx expo start --ios

# Запуск на Android
npx expo start --android
```

#### Backend (Server)
```bash
# Переход в директорию сервера
cd server

# Установка зависимостей
npm install

# Настройка переменных окружения
cp .env.example .env
# Отредактируйте .env файл с вашими настройками

# Настройка базы данных
npx prisma generate
npx prisma migrate deploy

# Запуск сервера разработки
npm run dev

# Или запуск production сервера
npm start
```

### Настройка окружения

1. **Backend переменные окружения** (`.env` в папке `server/`):
   ```bash
   # База данных
   DATABASE_URL="postgresql://user:password@localhost:5432/reba_db"
   
   # JWT
   JWT_SECRET="your-super-secret-jwt-key-min-32-chars"
   JWT_EXPIRES_IN="7d"
   
   # Redis (опционально)
   REDIS_URL="redis://localhost:6379"
   
   # CORS
   CORS_ORIGIN="http://localhost:3000,http://localhost:19006"
   
   # Rate Limiting
   RATE_LIMIT_WINDOW_MS=900000
   RATE_LIMIT_MAX_REQUESTS=100
   
   # Server
   PORT=3001
   NODE_ENV=development
   ```

2. **Frontend Firebase настройка:**
   ```bash
   # Создайте проект в Firebase Console
   # Скопируйте конфигурацию в src/config/firebase.ts
   ```

3. **Яндекс OAuth настройка:**
   ```bash
   # Зарегистрируйте приложение в Yandex OAuth
   # Обновите Client ID и Secret в src/services/authService.ts
   ```

4. **Настройка индексов БД:**
   ```bash
   cd server
   # Применить индексы для оптимизации
   node apply-indexes.js
   # Или следовать инструкциям в APPLY_INDEXES.md
   ```

## Архитектура проекта

### Frontend структура
```
src/
├── components/          # Переиспользуемые компоненты
│   ├── auth/           # Компоненты авторизации
│   └── common/         # Общие UI компоненты
├── screens/            # Экраны приложения
│   ├── HomeScreen.tsx  # Главная страница
│   ├── ProfileScreen.tsx # Профиль пользователя
│   └── ...
├── services/           # Бизнес-логика
│   └── authService.ts  # Сервис авторизации
├── store/             # Управление состоянием
│   └── useAppStore.ts # Zustand store
├── types/             # TypeScript типы
└── utils/             # Утилиты и константы
```

### Backend структура
```
server/
├── src/
│   ├── routes/         # API маршруты
│   │   ├── auth.js     # Аутентификация
│   │   ├── centers.js  # Центры реабилитации
│   │   ├── articles.js # Статьи
│   │   ├── bookings.js # Бронирования
│   │   └── users.js    # Пользователи
│   ├── middleware/     # Middleware функции
│   │   └── auth.js     # JWT аутентификация
│   ├── utils/          # Утилиты
│   │   └── prisma.js   # Prisma Client (singleton)
│   ├── __tests__/      # Тесты
│   └── index.js        # Главный файл сервера
├── prisma/
│   ├── schema.prisma   # Схема базы данных
│   └── migrations/    # Миграции БД
└── apply-indexes.js    # Скрипт применения индексов
```

## Производительность и оптимизация

### Кэширование Redis
- **Кэширование списков центров** - снижение времени ответа с 200ms до 2ms
- **Кэширование деталей центров** - мгновенная загрузка популярных центров
- **Кэширование статей** - быстрый доступ к контенту
- **TTL (Time To Live)** - автоматическая инвалидация кэша

### Оптимизация базы данных
- **Индексы на часто используемых полях**:
  - `city` - поиск центров по городу
  - `rating` - сортировка по рейтингу
  - `verified` - фильтрация верифицированных центров
  - `centerId` в отзывах - быстрый поиск отзывов
- **Connection Pooling** - эффективное управление соединениями с БД
- **Оптимизированные запросы Prisma** - минимизация количества запросов

### Метрики производительности
- **API Response Time**: <50ms (с Redis), <200ms (без кэша)
- **Database Query Time**: <10ms (с индексами)
- **Cache Hit Rate**: >80% для популярных эндпоинтов

## Безопасность

### Реализованные меры защиты

#### Аутентификация и авторизация
- **JWT токены** с настраиваемым временем жизни
- **bcrypt хеширование** паролей (12 раундов)
- **Middleware авторизации** для защиты маршрутов
- **Роли пользователей** (USER, CENTER, ADMIN) с разграничением доступа
- **Валидация входных данных** через express-validator

#### Защита API
- **Helmet** - установка безопасных HTTP заголовков
- **Rate Limiting** - защита от DDoS и брутфорс атак
- **CORS** - настройка разрешенных источников
- **Валидация данных** - проверка всех пользовательских входов
- **Санитизация** - очистка данных от потенциально опасного контента

#### Защита данных
- **HTTPS** - шифрование трафика (в production)
- **Безопасное хранение паролей** - только хеши, никогда plain text
- **Изоляция данных** - пользователи видят только свои данные
- **Логирование** - отслеживание подозрительной активности

### Mobile App производительность
- **Bundle size**: ~2.5MB (оптимизирован)
- **Startup time**: <3 секунд
- **Memory usage**: <100MB в активном состоянии
- **Battery optimization**: фоновые задачи оптимизированы

## Тестирование

### Frontend тесты
```bash
# Запуск всех тестов
npm test

# Тестирование с покрытием
npm run test:coverage

# Watch mode
npm run test:watch
```

### Backend тесты
```bash
cd server

# Запуск всех тестов
npm test

# Тестирование авторизации
npm run test:auth

# Watch mode
npm run test:watch

# С покрытием кода
npm test -- --coverage
```

### Типы тестов
- **Unit тесты** - тестирование отдельных функций и компонентов
- **Integration тесты** - тестирование API endpoints
- **Auth тесты** - тестирование аутентификации и авторизации
- **Coverage** - отслеживание покрытия кода тестами

## Технологическая дорожная карта (короткий приоритет)

### Квартал 1–2 (MVP → рынок):
- [ ] Завершение онбординга центров и интеграция платежной/CRM-инфраструктуры.
- [ ] Интеграция с медицинскими системами
- [ ] Запуск базовой аналитики лидов и панели KPI для центров.

### Квартал 3–4 (масштаб + ИИ MVP):
- [ ] OCR + NLP для автоматической верификации документов центров.
- [ ] Рекомендательная система центров/программ (коллаборативная + content-based) — персонализация поиска.
- [ ] Чат-бот для первичной триаж-оценки и маршрутизации обращений.

###  Бизнес-модель и монетизация
- [ ] Основной поток: подписка/комиссия центров за размещение на платформе (ежемесячная) и лиды (lead generation).
- [ ] Дополнительные: платные аналитические отчёты, коммерческие интеграции (страховщики, корпоративные программы), B2B-интеграции (CRM).
- [ ] Социальная составляющая: бесплатная базовая витрина для НКО и малых центров с возможностью платного апгрейда.

## Вклад в проект

Проект отстро нуждается в финансирование для окончания разработки.


Предлагается два сценария финансирования:

Pre-seed (≋ $30–200k) — цель: завершить коммерческий MVP, подключить 200–500 центров, запустить первую ИИ-фичу (OCR-верификация).

Распределение: 55% разработка и MLOps (нейросети, интеграции), 20% коммерция (sales, on-boarding центров), 15% операционные расходы (хостинг, безопасность, правовое), 10% маркетинг / PR.

Seed (≋ $100k–500k) — цель: масштабирование на ключевые регионы, полноценный ИИ-рекомендер, CRM-интеграции, коммерциализация и B2B-продукты.
Распределение: 45% R&D & ML team + infra, 25% sales & partnerships, 15% product & ops, 10% go-to-market, 5% юридическое и комплаенс....


## Лицензия

Этот проект лицензирован под MIT License - см. файл [LICENSE](LICENSE) для деталей.

## Команда

**Основатель и главный разработчик:** Вадим Давыдов

## Контакты

- **Telegram**: [@vadimsao](https://t.me/vadimsao)


## Благодарности

Спасибо всем участникам сообщества за вклад в развитие проекта!

---

<div align="center">
  <strong>РЕБА</strong> - делаем реабилитацию доступней и ближе
</div>
